package uk.ac.cam.oda22.graphics;

import java.awt.BasicStroke;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.util.LinkedList;
import java.util.List;

import javax.swing.JPanel;

/**
 * @author Oliver
 *
 */
public class VisualiserJPanel extends JPanel implements IVisualiser {

	private static final long serialVersionUID = 4146428062464803588L;
	
	private List<Line> lines;
	
	public VisualiserJPanel() {
		lines = new LinkedList<Line>();
	}

	private void draw(Graphics g) {
		Graphics2D graphics = (Graphics2D)g;

		// Add all lines to the graphics.
		for (Line line : this.lines) {
			graphics.setColor(line.colour);
			graphics.setStroke(new BasicStroke(line.thickness));
			
			graphics.draw(line.l);
		}
	}

	@Override
	public void paintComponent(Graphics g) {
		super.paintComponent(g);
		
		draw(g);
	}

	@Override
	public void drawLine(Line line) {
		this.lines.add(line);
		revalidate();
		repaint();
	}
	
	private void updateGraphics() {
	    SwingUtilities.invokeLater(new Runnable() {
	        public void run() {
	            //write your code
	            validate();
	            repaint();
	        }
	    });
	}

}
